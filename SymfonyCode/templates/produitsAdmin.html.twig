{% extends "base.html.twig" %}
{% block title %}Produits{% endblock %}
{% block body %}

{% for message in app.flashes('success') %}
        <div class="flash-notification" style="position: fixed;
                                          top: 20px;
                                          left: 50%;
                                          transform: translateX(-50%);
                                          background: #29dd05ff;
                                          color: white;
                                          padding: 15px;
                                          border-radius: 5px;
                                          z-index: 1000;
                                          display: flex;
                                          align-items: center;
                                          gap: 10px;">
            {{ message }}
            <button onclick="this.parentElement.remove()" 
                    style="margin-left: 15px;
                           background: white;
                           color: #29dd05ff;
                           border: none;
                           border-radius: 3px;
                           padding: 3px 8px;
                           cursor: pointer;">
                OK
            </button>
        </div>
{% endfor %}

<section class="sub-header">
        <nav>
            <a href="/homeAdmin"><img src="images/4bois1.jpeg"></a>
            <div class="nav-links" id="nav-links">
                <i class="fa fa-times" onclick="hideMenu()"></i>
                <ul>
                    <li><a href="/homeAdmin">ACCUEIL</a></li>
                    <li><a href="/produitsAdmin">PRODUITS</a></li>
                    <li><a href="/commandesAdmin">COMMANDES</a></li>
                    <li><a href="/contactsAdmin">CONTACTS</a></li>
                    
                    {% if app.user %}
                        <li class="nav-item">
                            <span class="nav-link" style="color: white !important;"><i class="bi bi-person-circle me-1"></i>{{ app.user.username }}</span> 
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{ path('app_logout') }}"><i class="bi bi-box-arrow-right me-1"></i>DÉCONNEXION</a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link" href="/login"><i class="bi bi-box-arrow-in-right me-1"></i>CONNEXION</a>
                        </li>
                    {% endif %}
                </ul>
            </div>
            <i class="fa fa-bars" onclick="showMenu()"></i>
        </nav>
</section>

<!-- produits -->

<div style="text-align: center; margin: 20px 0; color: #100060ff;">
    <h1>Liste des produits</h1>
</div>

<p style="text-align: center;">
   - <strong>680 DH</strong> correspond à un produit de dimensions 280 cm (longueur) × 210 cm (largeur) × 0,8 cm (épaisseur)<br>
   - <strong>950 DH</strong> correspond à un produit de dimensions 280 cm (longueur) × 210 cm (largeur) × 1,8 cm (épaisseur)
</p>

<div style="flex: 1; overflow-y: auto; margin: 0 20px;" style=" display: flex; justify-content: center; align-items: center; height: 78.5vh; ">
<table border="1" cellpadding="10">
    <thead style="background-color: #c1e5ffff;">
        <tr>
            <th>ID</th>
            <th>Nom</th>
            <th>Prix</th>
            <th>Image Avant</th>
            <th>Image Après</th>
            <th>Modification</th>
            <th>Suppression</th>
        </tr>
    </thead>
    <tbody>
        {% for produit in produits %}
            <tr>
                <td>{{ produit.id }}</td>
                <td>{{ produit.nomProduit }}</td>
                <td>{{ produit.prixProduit }} DH</td>
                <td>
                    <div style="width: 150px; height: 150px; overflow: hidden; display: flex; justify-content: center; align-items: center;">
                        <img src="{{ asset('uploads/' ~ produit.imageProduitAvant) }}" 
                            alt="Avant" 
                            style="max-width: 100%; max-height: 100%; object-fit: contain;">
                    </div>
                </td>
                <td>
                    <div style="width: 150px; height: 150px; overflow: hidden; display: flex; justify-content: center; align-items: center;">
                        <img src="{{ asset('uploads/' ~ produit.imageProduitApres) }}" 
                            alt="Après" 
                            style="max-width: 100%; max-height: 100%; object-fit: contain;">
                    </div>
                </td>

                <td>
                <a href="{{ path('modifier_produit', {'id': produit.id}) }}" 
                   class="btn-modifier" 
                   style="background-color: #4CAF50; color: white; padding: 8px 12px; text-decoration: none; border-radius: 4px;">
                    Modifier
                </a>
            </td>
            <td>
                <a href="{{ path('supprimer_produit', {'id': produit.id}) }}" 
                   class="btn-supprimer" 
                   style="background-color: #f44336; color: white; padding: 8px 12px; text-decoration: none; border-radius: 4px;"
                   onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce produit ?');">
                    Supprimer
                </a>
            </td>
                
            </tr>
        {% else %}
            <tr>
                <td colspan="5">Aucun produit trouvé.</td>
            </tr>
        {% endfor %}
    </tbody>
</table>
</div>

<div style=" margin-bottom: 2%; display:flex; justify-content: center; align-items: center;">
    <a href="{{ path('produits_admin_ajout') }}" class="btn-panier" style="background-color: #b2642e; color: white; font-size: 1.2rem; padding: 12px 25px; text-decoration: none;">
        Ajouter un produit
    </a>
</div>



{% endblock %}